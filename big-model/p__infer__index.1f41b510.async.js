"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4],{25753:function(Ne,te,r){r.r(te),r.d(te,{default:function(){return fa}});var C=r(93236),J=r(46599),O={inferContainer:"inferContainer___L8cbK"},G=r(25359),d=r.n(G),ne=r(57213),o=r.n(ne),ie=r(49811),U=r.n(ie),le=r(54306),D=r.n(le),K=r(67957),q=r(78868),ce=r(26686),de=r(24614),se=r(30947),Ie=r(26749),De=r(94218),be=r(75646),me=r(98065),Te=r(6986),ve=r(69434),g={resourceOverview:"resourceOverview___wNLzs",title:"title___hrA1S",content:"content___F34T8",wrapperCalculation:"wrapperCalculation___ejuBO",calculationHeader:"calculationHeader___Q6TJ5",calculationTitle:"calculationTitle___oaruN",calculationInfo:"calculationInfo___Awbpe",chainInfoItemValue:"chainInfoItemValue___jL_eq",calculationContent:"calculationContent___OdMf0",calculationItem:"calculationItem___Cb21m",left:"left___Gg_rm",name:"name___Q47gW",algorithmName:"algorithmName___vTyEN",leftDisabled:"leftDisabled___XdKtL",right:"right___YlyR2",header:"header___dirUa",firstSpan:"firstSpan___iViap",status:"status___JHcu1",rightContent:"rightContent___GMC2G",contentItem:"contentItem___zrEmH",value:"value___dhgCv",label:"label___tOYgi",footer:"footer___Xi_F_",noData:"noData___QDf7k"},_e=r(84875),ee=r.n(_e),Ae=r.p+"static/yay.7d162f31.jpg",Ee=r.p+"static/scene-segmentation.d266679b.png",Me=r.p+"static/detection-classification.2e21236a.png",ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAABvCAYAAADhXlINAAADpElEQVR4Xu2dT0uUURhH36/RrrV+peorFO7MP3cq0SKiiMBKFNpEm2oV2aJFoIsIBRctxJD+GLVpUSRkor/u4xDOddNQ73Nvcz0HDsydWT33PTM6zHCnEYATzdE7ANqCuMCNNK69PWl3tx7395PxIC9pXOvr0tyctLAw+M7PS1tbyXiQlzSulRVpdFQaHx98x8akjY1kPMhLGtfqqjQxIXU6g28I0ps3yXiQlyZZEZcDX6NfKjP+P9sHTbIirpaJb5B0LzoTvVKBl6NXox/UD02yIq6WsbjuROOeKlTgZPRC9J36oUlWxNUyFtdddS9KpwJD9KKIi7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDCIuk7gcDPq3uOxsK7swg+7kJHG1btDfx7W2Jk1NSTMzg+/0tLS5mYyXH4vrdjQ+YQ8CG3TjX7WDyN6qH9K4tre7Rz1+/FiHP34k4+VnP/o4OqvuaTc1OBf9pH5I4wIHdqM70Z8VaU+aP0Nc4AZxgRvEBW4QF7hBXOAGcYEbxAVuEBe4QVzgBnGBG8QFbhAXuJHEtRm9H31QiTbLkqAUSVwr0fPqfmunBkfVDay/z/ChbZK4VtW9KJ1KtK/o2SsYcZWh6V0QF7RJ07sgLmiTpndBXP4sv5fOPpVGntXluUXp0gvp287hrM3hTeLKwa2XcdNHo+OVGd8Jnrgmffp+OGtzeJO4cjD7Km563OSmU5mT0skb0mfiKgdxVSJxZZS4ykNclUhcGSWu8hBXJRJXRomrPMRVicSVUeIqD3FVInFllLjKQ1yVSFwZJa7yEFclEldGias8xFWJxJVR4ioPcVUicWWUuMpDXJVIXBklrvIQVyUSV0aJqzzEVYnElVHiKg9xVSJxZZS4ykNclUhcGSWu8hzbuDgT1Z9jG9fraHxcNyvxevSJ/q+4ju35XPZrzPbYdiXaLKV/Qv0ozzelUw+lM4/q8nScaWRR+tqz4UlcAG1CXOAGcYEbxAVuEBe4QVzgBnGBG8QFbhAXuEFc4AZxgRvEBW4QF7hBXOAGcYEbxAVuNMvLy+p1aWkJsRWb4eFh/XZoaAixNX8BfVa5OhmC98cAAAAASUVORK5CYII=",Fe=r.p+"static/changes.62d464b3.png",ge=r(34840),Ze=Object.defineProperty,fe=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,he=(s,i,c)=>i in s?Ze(s,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[i]=c,Pe=(s,i)=>{for(var c in i||(i={}))we.call(i,c)&&he(s,c,i[c]);if(fe)for(var c of fe(i))Se.call(i,c)&&he(s,c,i[c]);return s};const Oe=s=>C.createElement("svg",Pe({className:"shalou_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},s),C.createElement("path",{d:"M787.69 960H236.31c-41.33 0-68.92-27.56-68.92-68.92V767.03L477.54 512 167.38 256.97V132.92c0-41.36 27.6-68.92 68.92-68.92h551.38c41.33 0 68.92 27.56 68.92 68.92v124.05L546.46 512l310.15 255.03v124.05c.01 41.36-27.59 68.92-68.92 68.92zM512 574.02 236.31 801.46v89.59h551.38v-89.59L512 574.02zm-275.69-441.1v89.59L512 449.94l275.69-227.43v-89.59H236.31z"}));var pa="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTc4Ny42OSA5NjBIMjM2LjMxYy00MS4zMyAwLTY4LjkyLTI3LjU2LTY4LjkyLTY4LjkyVjc2Ny4wM0w0NzcuNTQgNTEyIDE2Ny4zOCAyNTYuOTdWMTMyLjkyYzAtNDEuMzYgMjcuNi02OC45MiA2OC45Mi02OC45Mmg1NTEuMzhjNDEuMzMgMCA2OC45MiAyNy41NiA2OC45MiA2OC45MnYxMjQuMDVMNTQ2LjQ2IDUxMmwzMTAuMTUgMjU1LjAzdjEyNC4wNWMuMDEgNDEuMzYtMjcuNTkgNjguOTItNjguOTIgNjguOTJ6TTUxMiA1NzQuMDIgMjM2LjMxIDgwMS40NnY4OS41OWg1NTEuMzh2LTg5LjU5TDUxMiA1NzQuMDJ6bS0yNzUuNjktNDQxLjF2ODkuNTlMNTEyIDQ0OS45NGwyNzUuNjktMjI3LjQzdi04OS41OUgyMzYuMzF6Ii8+PC9zdmc+",W=r(81752),j=r(68616),Le=r(66367),Be={modelConfig:"modelConfig___K90lE"},Q=r(15367),ze=window,ae=ze.global_config;function pe(s){return ae.localData?new Promise(function(i){setTimeout(function(){i({data:{list:[{chip_name:"Ascend 310P3",chip_status:"OK",chip_power:"",chip_temperature:"44",chip_aicore:"0",chip_memory:"7",vnpu_data:[{vnpu_name:"vdavinci100",vnpu_aicpu:1,vnpu_memory:3,vnpu_status:0,algorithm_type:-1,is_independence_npu:!0},{vnpu_name:"vdavinci101",vnpu_aicpu:2,vnpu_memory:6,vnpu_status:0,algorithm_type:0},{vnpu_name:"vdavinci102",vnpu_aicpu:1,vnpu_memory:6,vnpu_status:0,algorithm_type:1},{vnpu_name:"vdavinci103",vnpu_aicpu:4,vnpu_memory:12,vnpu_status:0,algorithm_type:2}]},{chip_name:"Mcu",chip_status:"OK",chip_power:"15.0",chip_temperature:"",chip_aicore:"",chip_memory:"",vnpu_data:[{vnpu_name:"vdavinci100",vnpu_aicpu:1,vnpu_memory:3,algorithm_type:3},{vnpu_name:"vdavinci101",vnpu_aicpu:2,vnpu_memory:6,algorithm_type:3},{vnpu_name:"vdavinci102",vnpu_aicpu:1,vnpu_memory:6,algorithm_type:3},{vnpu_name:"vdavinci103",vnpu_aicpu:4,vnpu_memory:12,algorithm_type:3}]}],total:2},success:!0})},100)}):(0,Q.Z)("/bigIntelligence/v1/reasoning/vnpuList",{method:"GET",params:s})}function Ue(){return ae.localData?new Promise(function(s){setTimeout(function(){s([{nodeName:"Ascend 310P3-vdavinci100",nodeStatus:1,runTaskNum:0,waitTaskNum:0},{nodeName:"Ascend 310P3-vdavinci101",nodeStatus:1,runTaskNum:0,waitTaskNum:0},{nodeName:"Ascend 310P3-vdavinci102",nodeStatus:1,runTaskNum:0,waitTaskNum:0}])},100)}):(0,Q.Z)("/bigIntelligence/v1/getNodeStatus",{method:"GET"})}function Ve(s){return(0,Q.Z)("/bigIntelligence/v1/getNodeTaskMsg",{method:"GET",params:s})}function Re(s){return ae.localData?new Promise(function(i){setTimeout(function(){i({change:[],recognize:[],segmentation:[{num:30,time:"2023-09-26 16"},{num:1,time:"2023-09-26 17"},{num:1,time:"2023-09-26 18"},{num:1,time:"2023-09-27 11"},{num:2,time:"2023-09-27 20"}],sort:[]})},100)}):(0,Q.Z)("/bigIntelligence/v1/getTasks",{method:"GET",params:s})}function We(s){return ae.localData?new Promise(function(i){setTimeout(function(){i({change:[],recognize:[],segmentation:[{num:10.654,time:"2023-09-26 16"},{num:.005,time:"2023-09-26 17"},{num:.001,time:"2023-09-26 18"},{num:18000.005,time:"2023-09-27 11"},{num:.007,time:"2023-09-27 20"}],sort:[]})},100)}):(0,Q.Z)("/bigIntelligence/v1/getAverageTreatment",{method:"GET",params:s})}function Ge(s){return ae.localData?new Promise(function(i){setTimeout(function(){i({data:{natural_resources:[{node_name:"node1",node_status:"\u8FD0\u884C\u4E2D",node_role:"\u63A7\u5236\u5E73\u9762\u8282\u70B9",cpu_total:"4\u6838",cpu_used:"0.98",cpu_usage:"27%",mem_total:"14.64GB",mem_used:"9.71",mem_usage:"66%",container_group_total:"110",container_group_used:"51",container_group_usage:"46%",node_monitor:[{metric_name:"CPU\u7528\u91CF\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"},{time:1695506124,usage:"39.18333333333333"}]},{metric_name:"\u5185\u5B58\u7528\u91CF\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"}]},{metric_name:"\u78C1\u76D8\u7528\u91CF\u8BE6\u60C5\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"}]}]}]},success:!0})},100)}):(0,Q.Z)("/bigIntelligence/v1/reasoning/resourceInfo",{params:s})}function Qe(s){return(0,Q.Z)("/bigIntelligence/v1/getNodeTaskMsg",{method:"post",data:s})}function xe(s){return(0,Q.Z)("bigIntelligence/v1/reasoning/algorithmOperate",{method:"post",data:s})}function He(s){return ae.localData?new Promise(function(i){setTimeout(function(){i({data:{natural_resources:[{node_name:"node1",node_status:"\u8FD0\u884C\u4E2D",node_role:"\u63A7\u5236\u5E73\u9762\u8282\u70B9",cpu_total:"4\u6838",cpu_used:"0.98",cpu_usage:"27%",mem_total:"14.64GB",mem_used:"9.71",mem_usage:"66%",container_group_total:"110",container_group_used:"51",container_group_usage:"46%",node_monitor:[{metric_name:"CPU\u7528\u91CF\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"},{time:1695506124,usage:"39.18333333333333"}]},{metric_name:"\u5185\u5B58\u7528\u91CF\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"}]},{metric_name:"\u78C1\u76D8\u7528\u91CF\u8BE6\u60C5\uFF08%\uFF09",values:[{time:1695506124,usage:"39.18333333333333"}]}]}]},success:!0})},100)}):(0,Q.Z)("/bigIntelligence/v1/reasoning/resourceInfo",{params:s})}var e=r(62086);function Xe(s){var i=s.visible,c=s.onClose,m=s.record,b=(0,J.useModel)("@@initialState"),N=b.initialState,A=W.Z.useForm(),P=D()(A,1),F=P[0],E=(0,C.useState)(!1),I=D()(E,2),f=I[0],p=I[1],R=(0,C.useState)(!1),M=D()(R,2),L=M[0],k=M[1],x=(0,C.useMemo)(function(){var h=[{label:"\u573A\u666F\u5206\u5272",value:0},{label:"\u68C0\u6D4B\u5206\u7C7B",value:1},{label:"\u8BC6\u522B",value:2},{label:"\u53D8\u5316\u68C0\u6D4B",value:3}];return m.is_independence_npu?h.slice(0,1):h},[m.is_independence_npu]);function T(){return y.apply(this,arguments)}function y(){return y=U()(d()().mark(function h(){var Z,_;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,F.validateFields();case 3:return Z=t.sent,console.log(0xb32df54700d,N.username),t.prev=5,t.next=8,xe({operate_type:parseInt(m.operate_type),chip_tag:m.chip_name,vnpu_tag:m.name,user_name:N.username,algorithm_type:Z.algorithmType});case 8:_=t.sent,console.log(_),_.success&&(q.ZP.success("\u64CD\u4F5C\u6210\u529F\uFF01"),c()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),q.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF01");case 16:p(!1);case 17:case"end":return t.stop()}},h,null,[[5,13]])})),y.apply(this,arguments)}return(0,C.useEffect)(function(){var h=m.algorithm_type;if((h===-1||typeof h=="undefined")&&(h=0),i){var Z=o()(o()({},m),{},{algorithmType:h});F.setFieldsValue(Z)}else F.resetFields()},[i]),(0,e.jsx)(K.Z,{title:"\u6A21\u578B\u542F\u52A8\u914D\u7F6E",open:i,getContainer:!1,onOk:T,maskClosable:!1,centered:!0,width:"40vw",confirmLoading:f,onCancel:c,children:(0,e.jsxs)(W.Z,{className:Be.modelConfig,form:F,labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",style:{maxWidth:600},children:[(0,e.jsx)(W.Z.Item,{label:"\u6A21\u578B",name:"algorithmType",required:!0,children:(0,e.jsx)(j.ZP.Group,{children:x.map(function(h){return(0,e.jsx)(j.ZP,{value:h.value,children:h.label},h.value)})})}),(0,e.jsx)(W.Z.Item,{label:"\u914D\u7F6E\uFF08\u7F6E\u4FE1\u5EA6\uFF09",name:"config",required:!0,children:(0,e.jsx)(Le.Z,{min:0,max:1,step:1e-6,onChange:function(){return k(!0)},tooltip:{open:L,placement:"bottom"}})})]})})}var ye={createTaskModal:"createTaskModal___jg5ay",createTask:"createTask___VHlGH"},Je=r(5400),Ke=r(3918),$e={},Ce=r(18347),Ye=r(63650),qe=r(66292),ea=r.n(qe);function aa(s){var i=s.value,c=s.onChange,m=(0,C.useState)(i),b=D()(m,2),N=b[0],A=b[1],P=(0,C.useRef)();(0,C.useEffect)(function(){c(N)},[N]);var F=ea()(function(f){A(f)},50);function E(f){console.log(f),P.current.click()}function I(){console.log("\u7EC8\u7AEF\u8BBE\u5907\uFF1A",(0,Ye.J)());var f=P.current.value,p=f.split("\\"),R=p.splice(0,p.length-1).join("\\")+"\\";A(R)}return(0,e.jsxs)("span",{className:$e.selectFolderPath,children:[(0,e.jsxs)(ve.Z.Compact,{style:{width:"100%"},children:[(0,e.jsx)(Ce.Z,{placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9\u9065\u611F\u6570\u636E\u8DEF\u5F84",value:i,onChange:function(p){return F(p.target.value)},allowClear:!0}),(0,e.jsx)(se.ZP,{type:"primary",onClick:E,children:"\u9009\u62E9\u8DEF\u5F84"})]}),(0,e.jsx)("input",{ref:P,type:"file",style:{display:"none"},onChange:I})]})}function na(s){var i=s.visible,c=s.onClose,m=(0,C.useState)([]),b=D()(m,2),N=b[0],A=b[1],P=(0,Ke.t)("@@initialState"),F=P.initialState,E=(0,C.useState)(!1),I=D()(E,2),f=I[0],p=I[1],R=W.Z.useForm(),M=D()(R,1),L=M[0];function k(){return x.apply(this,arguments)}function x(){return x=U()(d()().mark(function Z(){var _,B;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return p(!0),a.next=3,L.validateFields();case 3:return _=a.sent,console.log(_),a.next=7,Qe(o()(o()({},_),{},{userName:F.name}));case 7:B=a.sent,console.log(B),B.code==="200"?(q.ZP.success("\u521B\u5EFA\u6210\u529F\uFF01"),c()):q.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF01"),p(!1);case 11:case"end":return a.stop()}},Z)})),x.apply(this,arguments)}(0,C.useEffect)(function(){i?L.setFieldsValue({level:0,shareType:"quantity",modelType:"segmentation"}):L.resetFields()},[i]),(0,C.useEffect)(function(){T().then()},[]);function T(){return y.apply(this,arguments)}function y(){return y=U()(d()().mark(function Z(){var _,B;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pe();case 2:_=a.sent,B=[],_.success&&(_.data.list.forEach(function(l){l.vnpu_data.forEach(function(n){B.push({label:l.chip_name+"-"+n.vnpu_name,value:l.chip_name+"-"+n.vnpu_name})})}),A(B));case 5:case"end":return a.stop()}},Z)})),y.apply(this,arguments)}var h=(0,C.useMemo)(function(){return N},[N]);return(0,e.jsx)(K.Z,{title:"\u521B\u5EFA\u63A8\u7406\u4EFB\u52A1",open:i,onOk:k,getContainer:!1,maskClosable:!1,width:"40vw",centered:!0,confirmLoading:f,onCancel:c,className:ye.createTaskModal,children:(0,e.jsxs)(W.Z,{className:ye.createTask,form:L,labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",style:{maxWidth:600},children:[(0,e.jsx)(W.Z.Item,{label:"\u865A\u62DF\u6838",name:"nodeList",children:(0,e.jsx)(Je.Z,{placeholder:"\u8BF7\u9009\u62E9",mode:"multiple",allowClear:!0,options:h})}),(0,e.jsx)(W.Z.Item,{label:"\u6A21\u578B",name:"modelType",required:!0,children:(0,e.jsxs)(j.ZP.Group,{children:[(0,e.jsx)(j.ZP,{value:"segmentation",children:"\u5206\u5272"}),(0,e.jsx)(j.ZP,{value:"classification",children:"\u5206\u7C7B"}),(0,e.jsx)(j.ZP,{value:"recognition",children:"\u8BC6\u522B"}),(0,e.jsx)(j.ZP,{value:"change",children:"\u53D8\u5316"})]})}),(0,e.jsx)(W.Z.Item,{label:"\u9065\u611F\u6570\u636E\u8DEF\u5F84",name:"path",required:!0,children:(0,e.jsx)(aa,{})}),(0,e.jsx)(W.Z.Item,{label:"\u4F18\u5148\u7EA7",name:"level",required:!0,children:(0,e.jsxs)(j.ZP.Group,{children:[(0,e.jsx)(j.ZP,{value:0,children:"\u4E00\u7EA7"}),(0,e.jsx)(j.ZP,{value:1,children:"\u4E8C\u7EA7"}),(0,e.jsx)(j.ZP,{value:2,children:"\u4E09\u7EA7"}),(0,e.jsx)(j.ZP,{value:3,children:"\u56DB\u7EA7"}),(0,e.jsx)(j.ZP,{value:4,children:"\u4E94\u7EA7"})]})}),(0,e.jsx)(W.Z.Item,{label:"\u6570\u636E\u5206\u914D\u7B56\u7565",name:"shareType",required:!0,children:(0,e.jsxs)(j.ZP.Group,{children:[(0,e.jsx)(j.ZP,{value:"quantity",children:"\u5E73\u5747\u5904\u7406\u6587\u4EF6\u6570"}),(0,e.jsx)(j.ZP,{value:"size",children:"\u5E73\u5747\u5904\u7406\u6570\u636E\u91CF"})]})})]})})}var oe={dirDetail:"dirDetail___GbAZ3",dirDetailContent:"dirDetailContent___aFS5L"},ta=r(97535),X=r(15911),$={taskList:"taskList___l4Zy2",searchArea:"searchArea___ipQbr",inputSearch:"inputSearch___kDiAl",disabledDirLog:"disabledDirLog___vWYwN"},sa=r(19045),ra=r(91930),je=r(27781),ua=r(61365);function ia(s){var i=s.visible,c=s.onClose,m=s.record;function b(){return N.apply(this,arguments)}function N(){return N=U()(d()().mark(function f(){var p;return d()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,He();case 2:return p=M.sent,console.log(p),M.abrupt("return",["Racing car sprays burning fuel into crowd.","Japanese princess to wed commoner.","Australian walks 100km after outback crash.","Man charged over missing wedding girl.","Los Angeles battles huge wildfires."]);case 5:case"end":return M.stop()}},f)})),N.apply(this,arguments)}var A=(0,J.useQuery)(["getShowLogData"],b),P=A.isLoading,F=A.isError,E=A.data,I=A.refetch;return(0,e.jsx)(K.Z,{title:"\u4EFB\u52A1\u65E5\u5FD7",className:oe.dirDetail,open:i,centered:!0,width:"60vw",footer:null,onCancel:c,children:(0,e.jsx)(je.Z,{bordered:!0,dataSource:E,loading:P,renderItem:function(p){return(0,e.jsxs)(je.Z.Item,{children:[(0,e.jsx)(ua.Z.Text,{mark:!0,children:"[ITEM]"})," ",p]})}})})}function la(s){var i=s.record,c=(0,X.x)({visible:!1,record:{},onClose:function(){N(function(x){x.visible=!1})}}),m=D()(c,2),b=m[0],N=m[1];console.log(i);var A=[{title:"\u5E8F\u53F7",dataIndex:"index",key:"index",align:"center"},{title:"\u5F85\u5904\u7406\u6570\u636E\u8DEF\u5F84",dataIndex:"url",key:"url"},{title:"\u63D0\u4EA4\u4EBA",dataIndex:"submitPerson",key:"submitPerson"},{title:"\u63D0\u4EA4\u65F6\u95F4",dataIndex:"time",key:"time",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",align:"center",render:function(x){return(0,e.jsx)(me.Z,{status:["default","processing","success"][x],text:["\u6392\u961F\u4E2D","\u5904\u7406\u4E2D","\u5DF2\u5904\u7406"][x]})}},{title:"\u64CD\u4F5C",dataIndex:"operate",key:"operate",align:"center",render:function(x,T){console.log(T);var y=!1;return(0,e.jsx)("a",{onClick:function(){y||N(function(Z){Z.visible=!0,Z.record={chipData:i,taskData:T}})},className:y?$.disabledDirLog:$.dirLog,children:"\u67E5\u770B\u65E5\u5FD7"})}}],P=(0,X.x)({status:[1,2]}),F=D()(P,2),E=F[0],I=F[1],f=(0,J.useQuery)(["getTaskList"],U()(d()().mark(function k(){var x;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log(E,i),y.next=3,Ve({nodeName:i.name});case 3:return x=y.sent,y.abrupt("return",x.taskList.map(function(h){return{index:h.taskID,submitPerson:h.userName,url:h.folder,time:h.createtime.split(" ")[0],status:0}}));case 5:case"end":return y.stop()}},k)}))),p=f.isLoading,R=f.isError,M=f.data,L=f.refetch;return console.log(f),(0,C.useEffect)(function(){L()},[E]),(0,e.jsxs)("span",{className:$.taskList,children:[(0,e.jsxs)("div",{className:$.searchArea,children:[(0,e.jsxs)("div",{className:$.status,children:[(0,e.jsx)("span",{className:$.statusLabel,children:"\u72B6\u6001\uFF1A"}),(0,e.jsx)(sa.Z.Group,{options:[{value:0,label:"\u6392\u961F\u4E2D"},{value:1,label:"\u5904\u7406\u4E2D"},{value:2,label:"\u5DF2\u5904\u7406"}],value:E.status,onChange:function(x){I(function(T){T.status=x})}})]}),(0,e.jsx)(Ce.Z.Search,{className:$.inputSearch,placeholder:"\u8BF7\u8F93\u5165\u63D0\u4EA4\u4EBA\u59D3\u540D",allowClear:!0,enterButton:"\u641C\u7D22",onSearch:function(x){return I(function(T){T.name=x})}})]}),(0,e.jsx)(ra.Z,{rowKey:"index",border:!1,dataSource:[{id:1,index:1}],columns:A}),b.visible&&(0,e.jsx)(ia,o()({},b))]})}function oa(s){var i=s.visible,c=s.onClose,m=s.record,b=[{label:"\u4EFB\u52A1\u961F\u5217",key:"1",children:(0,C.createElement)(la,{record:m})},{label:"Tab 2",key:"2",children:"Tab 2",disabled:!0}];return(0,e.jsx)(K.Z,{title:"\u914D\u7F6E\u8BE6\u60C5",getContainer:!1,className:oe.dirDetail,open:i,maskClosable:!1,centered:!0,width:"60vw",footer:null,onCancel:c,children:(0,e.jsx)("div",{className:oe.dirDetailContent,children:(0,e.jsx)(ta.Z,{defaultActiveKey:"1",items:b})})})}var ca=function(){var s=[{key:"chip_status",label:"\u82AF\u7247\u72B6\u6001"},{key:"chip_power",label:"\u529F\u7387"},{key:"chip_temperature",label:"\u6E29\u5EA6"},{key:"chip_aicore",label:"AI\u6838\u5FC3"},{key:"chip_memory",label:"\u5185\u5B58"}],i=new Map([[-1,{name:"",img:Ae}],[0,{name:"\u573A\u666F\u5206\u5272",img:Ee}],[1,{name:"\u68C0\u6D4B\u5206\u7C7B",img:Me}],[2,{name:"\u8BC6\u522B",img:ke}],[3,{name:"\u53D8\u5316\u68C0\u6D4B",img:Fe}]]),c={0:{value:"default",label:"\u5F02\u5E38",desc:"\u53D1\u751F\u6545\u969C\u6216\u72B6\u6001\u672A\u77E5\uFF0C\u4E0D\u5141\u8BB8\u5BF9\u4E0D\u53EF\u7528\u7684\u865A\u62DF\u6838\u505A\u4EFB\u4F55\u64CD\u4F5C"},1:{value:"lime",label:"\u7A7A\u95F2",desc:"\u865A\u62DF\u6838\u72B6\u6001\u6B63\u5E38\uFF0C\u4F46\u672A\u8C03\u5EA6\u4EFB\u4F55\u6A21\u578B\u5728\u5176\u4E0A\u8FD0\u884C"},2:{value:"success",label:"\u5C31\u7EEA",desc:"\u865A\u62DF\u6838\u72B6\u6001\u6B63\u5E38\uFF0C\u5DF2\u8C03\u5EA6\u6A21\u578B\u5728\u5176\u4E0A\u8FD0\u884C\uFF0C\u4E14\u6A21\u578B\u8FD0\u884C\u72B6\u6001\u6B63\u5E38\uFF0C\u6B64\u65F6\u865A\u62DF\u6838\u5DF2\u5177\u5907\u5904\u7406\u9065\u611F\u6570\u636E\u7684\u80FD\u529B"},3:{value:"orange",label:"\u7E41\u5FD9",desc:"\u865A\u62DF\u6838\u4E0A\u6A21\u578B\u8FD0\u884C\u72B6\u6001\u6B63\u5E38\uFF0C\u4E14\u6B63\u5728\u5904\u7406\u9065\u611F\u6570\u636E"}},m=(0,C.useRef)(new Map),b=(0,C.useState)(!1),N=D()(b,2),A=N[0],P=N[1],F=(0,X.x)({visible:!1,record:{}}),E=D()(F,2),I=E[0],f=E[1],p=(0,X.x)({visible:!1,record:{}}),R=D()(p,2),M=R[0],L=R[1],k=(0,J.useQuery)(["getResourceOverview"],U()(d()().mark(function t(){var a,l,n;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,pe();case 2:if(a=v.sent,l=a.success,n=a.data,l){v.next=6;break}return v.abrupt("return");case 6:return v.abrupt("return",n==null?void 0:n.list.map(function(u){return o()(o()({},u),{},{id:u.chip_name,name:u.chip_name,children:u.vnpu_data.map(function(S){return o()({id:S.vnpu_name,chip_name:u.chip_name,name:S.vnpu_name,actionType:S.algorithm_type,memoryTotal:S.vnpu_memory,cpuTotal:S.vnpu_aicpu,memoryUsage:S.vnpu_memory,cpuUsage:S.vnpu_aicpu},S)})})}));case 7:case"end":return v.stop()}},t)})));function x(){return T.apply(this,arguments)}function T(){return T=U()(d()().mark(function t(){var a;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ue();case 2:a=n.sent;try{console.log(a),a==null||a.map(function(w){m.current.set(w.nodeName,w)})}catch(w){}case 4:case"end":return n.stop()}},t)})),T.apply(this,arguments)}var y=function(a,l){switch(console.log("click",l,a),a){case"0":f(function(n){n.visible=!0,n.record=o()(o()({},l),{},{operate_type:a})});break;case"1":K.Z.confirm({title:"\u6A21\u578B ".concat(l.vnpu_name," \u6B63\u5728 ").concat(l.chip_name," \u4E0A\u8FD0\u884C\uFF0C\u662F\u5426\u505C\u6B62\uFF1F"),onOk:function(w){xe({chip_tag:l.chip_name,vnpu_tag:l.name}).then(function(v){v.success&&(q.ZP.success("\u64CD\u4F5C\u6210\u529F\uFF01"),w())}).catch(function(v){q.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF01")})}});break;case"2":f(function(n){n.visible=!0,n.record=o()(o()({},l),{},{operate_type:a})});break}},h=k.isLoading,Z=k.isError,_=k.data,B=k.refetch;return console.log("relationMap",m),(0,C.useEffect)(function(){console.log("get data123"),x().then();var t=setInterval(U()(d()().mark(function a(){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("get data"),n.next=3,B();case 3:x().then();case 4:case"end":return n.stop()}},a)})),5*1e3);return function(){return clearInterval(t)}},[]),(0,e.jsxs)("div",{className:ee()(g.resourceOverview,"boxShadow"),children:[h&&!_?(0,e.jsx)(ce.Z,{size:"large",className:ee()("center_X_Y_transform")}):(0,e.jsx)(de.Z,{bordered:!1,title:(0,e.jsxs)("div",{className:g.title,children:[(0,e.jsx)("span",{children:"\u8D44\u6E90\u603B\u89C8"}),(0,e.jsx)(se.ZP,{onClick:function(){return P(!0)},children:"\u63A8\u7406\u4EFB\u52A1"})]}),children:(0,e.jsx)("div",{className:g.content,children:_==null?void 0:_.map(function(t){return(0,e.jsxs)("div",{className:ee()(g.wrapperCalculation),children:[(0,e.jsxs)("div",{className:g.calculationHeader,children:[(0,e.jsxs)("span",{className:g.calculationTitle,children:["\u63A8\u7406\u5361\uFF08",t.name,"\uFF09"]}),(0,e.jsx)(Ie.Z,{className:g.calculationInfo,children:s.map(function(a){return(0,e.jsxs)(De.Z,{span:3,children:[(0,e.jsxs)("span",{children:[a.label,":"]}),(0,e.jsx)("span",{className:g.chainInfoItemValue,children:t[a.key]||"-"})]},a.key)})})]}),(0,e.jsx)("div",{className:g.calculationContent,children:t!=null&&t.children.length?t==null?void 0:t.children.map(function(a){var l,n,w,v,u,S,re,H,z,V=(l=m.current.get(t.name+"-"+a.name))===null||l===void 0?void 0:l.nodeStatus;return typeof V=="undefined"&&(V=1),(0,e.jsxs)("div",{className:g.calculationItem,children:[(0,e.jsxs)("div",{className:ee()(g.left,a.disabled?g.leftDisabled:null),children:[(0,e.jsxs)("div",{className:g.name,children:["\u865A\u62DF\u6838",(0,e.jsxs)("span",{children:["(",a.name,")"]})]}),(0,e.jsx)("img",{src:(n=i.get(a.actionType))===null||n===void 0?void 0:n.img,alt:""}),!a.disabled&&(0,e.jsx)("div",{className:g.algorithmName,children:(w=i.get(a.actionType))===null||w===void 0?void 0:w.name})]}),(0,e.jsxs)("div",{className:g.right,children:[(0,e.jsxs)("div",{className:g.header,children:[(0,e.jsxs)("span",{className:g.firstSpan,children:[(0,e.jsx)(ge.CheckOutlined,{style:{color:"rgb(144,193,82)"}}),(v=m.current.get(t.name+"-"+a.name))===null||v===void 0?void 0:v.runTaskNum]}),(0,e.jsxs)("span",{children:[(0,e.jsx)(Oe,{width:12,height:12,fill:"rgb(216,176,86)"}),(u=m.current.get(t.name+"-"+a.name))===null||u===void 0?void 0:u.waitTaskNum]}),(0,e.jsx)("span",{className:g.status,children:(0,e.jsx)(be.Z,{title:(S=c[V])===null||S===void 0?void 0:S.desc,children:(0,e.jsx)(me.Z,{status:(re=c[V])===null||re===void 0?void 0:re.value,color:(H=c[V])===null||H===void 0?void 0:H.value,text:(z=c[V])===null||z===void 0?void 0:z.label})})})]}),(0,e.jsxs)("div",{className:g.rightContent,children:[(0,e.jsxs)("div",{className:g.contentItem,children:[(0,e.jsxs)("span",{className:g.label,children:["CPU(",a.memoryTotal,"\u6838)"]}),(0,e.jsx)("div",{className:g.value,children:a.cpuUsage||"--"})]}),(0,e.jsxs)("div",{className:g.contentItem,children:[(0,e.jsxs)("span",{className:g.label,children:["\u5185\u5B58(",a.cpuTotal,"MB)"]}),(0,e.jsx)("div",{className:g.value,children:a.memoryUsage||"--"})]})]}),(0,e.jsxs)("div",{className:g.footer,children:[(0,e.jsx)(se.ZP,{onClick:function(){return L(function(ue){ue.visible=!0,ue.record=a})},disabled:a.disabled,children:"\u8BE6\u60C5"}),(0,e.jsx)(Te.Z,{disabled:a.disabled,menu:{items:[{label:"\u542F\u52A8\u6A21\u578B",key:0,disabled:V!==1},{label:"\u505C\u6B62\u6A21\u578B",key:1,disabled:V!==2},{label:"\u66F4\u6362\u6A21\u578B",key:2,disabled:V!==1&&V!==2}],onClick:function(ue){return y(ue.key,a)}},children:(0,e.jsx)(se.ZP,{children:(0,e.jsxs)(ve.Z,{children:["\u64CD\u4F5C",(0,e.jsx)(ge.DownOutlined,{})]})})})]})]})]},a.id)}):(0,e.jsx)("div",{className:g.noData,children:"\u6682\u65E0VNPU\u6570\u636E"})})]},t.id)})})}),I.visible&&(0,e.jsx)(Xe,o()(o()({},I),{},{onClose:function(){return f(function(a){a.visible=!1,a.record={}})}})),M.visible&&(0,e.jsx)(oa,o()(o()({},M),{},{onClose:function(){return L(function(a){a.visible=!1,a.record={}})}})),A&&(0,e.jsx)(na,{visible:A,onClose:function(){P(!1)}})]})},Y={resourceStatistics:"resourceStatistics___fzO7A",title:"title___vAzL8",content:"content___qx_vG",contentItem:"contentItem___U5tZh",contentItemHeader:"contentItemHeader___f_Cjf",chartsName:"chartsName___NMqKt",loading:"loading___Cc9Mh"},da=r(75014),ma=r(5726),va=r.n(ma),ga=function(){var s=(0,X.x)({inferRequest:!0,dealTime:!0,resourceUsageRate:!0}),i=D()(s,2),c=i[0],m=i[1],b=(0,X.x)({inferRequest:1,dealTime:1,resourceUsageRate:1}),N=D()(b,2),A=N[0],P=N[1],F=(0,X.x)({params1:p(1),params2:p(1),params3:p(1)}),E=D()(F,2),I=E[0],f=E[1];function p(t){var a=new Date().getTime(),l=a-t*1e3*60*60;return{start_time:l,end_time:a}}var R=[{key:"inferRequest",name:"\u63A8\u7406\u8BF7\u6C42",onChange:function(a){var l=p(a.target.value);f(function(n){n.params1=l}),T().then()}},{key:"dealTime",name:"\u9065\u611F\u6570\u636E\u5E73\u5747\u5904\u7406\u65F6\u95F4",onChange:function(a){f(function(l){l.params2=p(a.target.value)})}},{key:"resourceUsageRate",name:"\u4E00\u4F53\u673A\u8D44\u6E90\u4F7F\u7528\u7387",onChange:function(a){f(function(l){l.params3=p(a.target.value)})}}],M=(0,X.x)({inferRequest:{data:[],title:"123",padding:"auto",xField:"time",yField:"num",seriesField:"name",xAxis:{tickCount:5},yAxis:{},scrollbar:{x:{}},legend:{position:"bottom",itemName:{style:{fill:"#000"},formatter:function(a){return a}}},smooth:!0},dealTime:{data:[],title:"123",padding:"auto",xField:"time",yField:"num",seriesField:"name",xAxis:{tickCount:5},yAxis:{},scrollbar:{x:{}},legend:{position:"bottom",itemName:{style:{fill:"#000"},formatter:function(a){return a}}},smooth:!0},resourceUsageRate:{data:[],title:"123",padding:"auto",xField:"time",yField:"usage",seriesField:"name",xAxis:{tickCount:5},yAxis:{},scrollbar:{x:{}},legend:{position:"bottom",itemName:{style:{fill:"#000"},formatter:function(a){return a}}},smooth:!0}}),L=D()(M,2),k=L[0],x=L[1];(0,C.useEffect)(function(){Promise.all([T(),h(),_()]).then(function(){})},[]);function T(){return y.apply(this,arguments)}function y(){return y=U()(d()().mark(function t(){var a,l,n;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log(I.params1),m(function(u){u.inferRequest=!0}),v.next=4,Re(I.params1);case 4:a=v.sent,l=0,n=[],!a.segmentation||a.segmentation.length===0?n.push({name:"\u5206\u5272",num:0}):a.segmentation.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u5206\u5272"})),l+=u.num}),!a.sort||a.sort.length===0?n.push({name:"\u5206\u7C7B",num:0}):a.sort.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u5206\u7C7B"})),l+=u.num}),!a.recognize||a.sort.length===0?n.push({name:"\u8BC6\u522B",num:0}):a.recognize.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u8BC6\u522B"})),l+=u.num}),!a.change||a.sort.length===0?n.push({name:"\u53D8\u5316",num:0}):a.change.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u53D8\u5316"})),l+=u.num}),x(function(u){l===0&&(u.inferRequest.yAxis.tickMethod=function(){return[0,20,40,60,80,100]}),u.inferRequest.data=n}),m(function(u){u.inferRequest=!1});case 13:case"end":return v.stop()}},t)})),y.apply(this,arguments)}function h(){return Z.apply(this,arguments)}function Z(){return Z=U()(d()().mark(function t(){var a,l,n;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return m(function(u){u.dealTime=!0}),v.next=3,We(I.params2);case 3:a=v.sent,l=0,n=[],!a.segmentation||a.segmentation.length===0?n.push({name:"\u5206\u5272",num:0}):a.segmentation.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u5206\u5272"})),l+=u.num}),!a.sort||a.sort.length===0?n.push({name:"\u5206\u7C7B",num:0}):a.sort.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u5206\u7C7B"})),l+=u.num}),!a.recognize||a.sort.length===0?n.push({name:"\u8BC6\u522B",num:0}):a.recognize.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u8BC6\u522B"})),l+=u.num}),!a.change||a.sort.length===0?n.push({name:"\u53D8\u5316",num:0}):a.change.forEach(function(u){n.push(o()(o()({},u),{},{name:"\u53D8\u5316"})),l+=u.num}),x(function(u){l===0&&(u.dealTime.yAxis.tickMethod=function(){return[0,20,40,60,80,100]}),u.dealTime.data=n}),m(function(u){u.dealTime=!1});case 12:case"end":return v.stop()}},t)})),Z.apply(this,arguments)}function _(){return B.apply(this,arguments)}function B(){return B=U()(d()().mark(function t(){var a,l,n,w,v,u,S;return d()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return m(function(z){z.resourceUsageRate=!0}),H.next=3,Ge(I.params3);case 3:n=H.sent,w=[],v=0,n.success&&(a=n.data)!==null&&a!==void 0&&a.natural_resources&&(l=n.data)!==null&&l!==void 0&&l.natural_resources.length&&((u=n.data)===null||u===void 0||(S=u.natural_resources[0])===null||S===void 0||S.node_monitor.forEach(function(z){console.log(z),z.values.forEach(function(V){w.push({name:z.metric_name,time:va()(V.time).format("HH:MM:ss"),usage:V.usage})})})),x(function(z){z.resourceUsageRate.data=w,v===0&&(z.resourceUsageRate.yAxis.tickMethod=function(){return[0,25,50,75,100]})}),m(function(z){z.resourceUsageRate=!1});case 9:case"end":return H.stop()}},t)})),B.apply(this,arguments)}return console.log(c),(0,e.jsx)("div",{className:ee()(Y.resourceStatistics,"boxShadow"),children:(0,e.jsx)(de.Z,{bordered:!1,title:(0,e.jsx)("span",{className:Y.title,children:"\u4E00\u4F53\u673A\u8D44\u6E90\u4F7F\u7528\u7EDF\u8BA1"}),children:(0,e.jsx)("div",{className:Y.content,children:R.map(function(t){return(0,e.jsxs)("div",{className:Y.contentItem,children:[(0,e.jsxs)("div",{className:Y.contentItemHeader,children:[(0,e.jsx)("span",{className:Y.chartsName,children:t.name}),(0,e.jsxs)(j.ZP.Group,{defaultValue:1,onChange:t.onChange,children:[(0,e.jsx)(j.ZP.Button,{value:1,children:"1\u5C0F\u65F6"}),(0,e.jsx)(j.ZP.Button,{value:2,children:"2\u5C0F\u65F6"}),(0,e.jsx)(j.ZP.Button,{value:4,children:"4\u5C0F\u65F6"}),(0,e.jsx)(j.ZP.Button,{value:8,children:"8\u5C0F\u65F6"})]})]}),c[t.key]?(0,e.jsx)(ce.Z,{className:ee()(Y.loading,"flex_center_X_Y")}):(0,e.jsx)(da.Z,o()({},k[t.key]))]},t.key)})})})})},fa=function(){var s=(0,J.useModel)("global"),i=s.name;return(0,e.jsxs)("div",{className:O.inferContainer,children:[(0,e.jsx)(ca,{}),(0,e.jsx)(ga,{})]})}},63650:function(Ne,te,r){r.d(te,{J:function(){return J},L:function(){return C}});function C(O){var G="pending",d,ne=O.then(function(o){G="success",d=o},function(o){G="error",d=o});return{read:function(){if(G==="pending")throw ne;if(G==="error")throw d;if(G==="success")return d}}}function J(){var O=navigator.userAgent,G=navigator.platform=="Win32"||navigator.platform=="Windows",d=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel";if(d)return"MacOS";var ne=navigator.platform=="X11"&&!G&&!d;if(ne)return"Unix";var o=String(navigator.platform).indexOf("Linux")>-1;if(o)return"Linux";if(G){var ie=O.indexOf("Windows NT 5.0")>-1||O.indexOf("Windows 2000")>-1;if(ie)return"Windows2000";var U=O.indexOf("Windows NT 5.1")>-1||O.indexOf("Windows XP")>-1;if(U)return"WindowsXP";var le=O.indexOf("Windows NT 5.2")>-1||O.indexOf("Windows 2003")>-1;if(le)return"Windows2003";var D=O.indexOf("Windows NT 6.0")>-1||O.indexOf("Windows Vista")>-1;if(D)return"Windows Vista";var K=O.indexOf("Windows NT 6.1")>-1||O.indexOf("Windows 7")>-1;if(K)return"Windows7"}return"other"}}}]);
